---
interface Props {
  bars: { value: number; color?: string }[];
  seriesConfig?: {
    color?: string,
    label?: string,
  }[]
}
const { bars, seriesConfig } = Astro.props;

const maxValue = Math.max(...bars.map((bar) => bar.value));

const DEFAULT_COLOR = "#E21617"
---

<div class="h-full w-full flex flex-row justify-end items-center">
  {
    bars.map(({ value, color }, index) => {
      return (
        <div class="h-full w-full flex flex-col justify-end">
          <div
            class="w-full relative flex flex-col items-center"
            style={
              "height: " +
              (value / maxValue) * 100 +
              "%; " +
              "background-color: " +
              (color ?? (seriesConfig && (seriesConfig[index].color ?? DEFAULT_COLOR)))
            }
          >
            <p class="absolute -top-5 text-sm italic font-thin">{value}</p>
          </div>
        </div>
      );
    })
  }
</div>
